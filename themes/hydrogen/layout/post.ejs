<div class="page-layout post-layout">
  <article class="post-article">
    <!-- 文章头部 -->
    <header class="post-header">
      <h1 class="post-title"><%= page.title %></h1>
      
      <!-- 元信息 -->
      <%- partial('_partial/post-meta', { post: page, showFull: true }) %>
      
      <!-- 封面图 -->
      <% if (page.cover) { %>
        <div class="post-cover">
          <img src="<%- url_for(page.cover) %>" alt="<%= page.title %>">
        </div>
      <% } %>
    </header>

    <!-- 文章内容 -->
    <div class="post-content markdown-body">
      <%- page.content %>
    </div>

    <!-- 标签 -->
    <% if (page.tags && page.tags.length) { %>
      <div class="post-tags">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z"></path>
          <path d="M7 7h.01"></path>
        </svg>
        <% page.tags.each(function(tag) { %>
          <a href="<%- url_for(tag.path) %>" class="tag-link"><%= tag.name %></a>
        <% }) %>
      </div>
    <% } %>

    <!-- 版权信息 -->
    <% if (theme.post.copyright) { %>
      <div class="post-copyright">
        <p><strong>本文作者：</strong><%= config.author %></p>
        <p><strong>本文链接：</strong><a href="<%= page.permalink %>"><%= page.permalink %></a></p>
        <p><strong>版权声明：</strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" rel="noopener noreferrer">CC BY-NC-SA 4.0</a> 许可协议。转载请注明出处！</p>
      </div>
    <% } %>

    <!-- 上一篇 / 下一篇 -->
    <nav class="post-nav">
      <% if (page.prev) { %>
        <a href="<%- url_for(page.prev.path) %>" class="post-nav-item prev">
          <span class="post-nav-label">上一篇</span>
          <span class="post-nav-title"><%= page.prev.title %></span>
        </a>
      <% } else { %>
        <div class="post-nav-item prev disabled"></div>
      <% } %>
      
      <% if (page.next) { %>
        <a href="<%- url_for(page.next.path) %>" class="post-nav-item next">
          <span class="post-nav-label">下一篇</span>
          <span class="post-nav-title"><%= page.next.title %></span>
        </a>
      <% } else { %>
        <div class="post-nav-item next disabled"></div>
      <% } %>
    </nav>
  </article>

  <!-- TOC 目录 -->
  <% if (theme.toc.enable && page.toc !== false) { %>
    <aside class="post-toc">
      <div class="toc-wrapper">
        <h3 class="toc-title">目录</h3>
        <div class="toc-content">
          <%- toc(page.content, { list_number: theme.toc.number, max_depth: theme.toc.max_depth }) %>
        </div>
      </div>
    </aside>
  <% } %>
</div>
