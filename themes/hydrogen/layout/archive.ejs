<div class="page-layout archive-layout">
  <div class="archive-wrapper">
    <header class="archive-header">
      <h1 class="archive-title">
        <% if (is_archive()) { %>
          归档
        <% } else if (is_category()) { %>
          分类: <%= page.category %>
        <% } else if (is_tag()) { %>
          标签: <%= page.tag %>
        <% } %>
      </h1>
      <p class="archive-count">共 <%= page.posts.length %> 篇文章</p>
    </header>

    <div class="archive-content">
      <%
        let currentYear = null;
        page.posts.each(function(post) {
          const postYear = date(post.date, 'YYYY');
      %>
        <% if (currentYear !== postYear) { %>
          <% if (currentYear !== null) { %>
            </ul>
          <% } %>
          <% currentYear = postYear; %>
          <h2 class="archive-year"><%= currentYear %></h2>
          <ul class="archive-list">
        <% } %>
        
        <li class="archive-item">
          <span class="archive-date"><%= date(post.date, 'MM-DD') %></span>
          <a href="<%- url_for(post.path) %>" class="archive-link"><%= post.title %></a>
        </li>
      <% }) %>
      
      <% if (currentYear !== null) { %>
        </ul>
      <% } %>
    </div>

    <!-- 分页 -->
    <%- partial('_partial/pagination') %>
  </div>
</div>
